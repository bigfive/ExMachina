<html>
<head>
  <script type="text/javascript" src="weights.js"></script>
  <style>
    .weights div {
      display: inline-block;
      margin: 10px;
      border: 1px solid grey;
    }
    .weights span {
      display: inline-block;
      width: 4px;
      height: 4px;
    }

    #layer_2_weights span {
      width: 8px;
      height: 8px;
    }

    hr {
      float: none;
      width: 100%;
      margin: 40px;
      opacity: 0;
    }
  </style>
</head>
<body>
  <div>Output Weights</div>
  <div class="weights" id="layer_2_weights"></div>

  <hr />

  <div>Input Weights</div>
  <div class="weights" id="layer_1_weights"></div>

  <script>
    var layerIds, layerIndex, layerId, weightsElem, weightIndex, node, nodeElem,
        layerWeightSet, layerWeights, nodeIndex, weight, pixelElem, color

    layerIds = ["layer_1_weights", "layer_2_weights"];
    layerWeightSet = [document.layer1Weights, document.layer2Weights];

    for (layerIndex in layerIds) {
      layerId = layerIds[layerIndex];
      layerWeights = layerWeightSet[layerIndex];
      weightsElem = document.getElementById(layerId);

      for (weightIndex in layerWeights) {
        node = layerWeights[weightIndex]
        nodeElem = document.createElement("div");
        weightsElem.appendChild(nodeElem);

        for (nodeIndex in node) {
          if (nodeIndex != 0 && nodeIndex % Math.sqrt(node.length) == 0) {
            nodeElem.appendChild(document.createElement("br"));
          }

          weight = node[nodeIndex]
          pixelElem = document.createElement("span");
          color = Math.floor(weight * -255);
          pixelElem.style.background = "rgb("+color+","+color+","+color+")";
          nodeElem.appendChild(pixelElem);
        }
      }
    }

    setTimeout(function(){
       window.location.reload(1);
    }, 1000);
  </script>
</body>
<html>
